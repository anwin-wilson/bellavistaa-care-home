<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cardiff Admin Dashboard - Bellavista</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../../assets/css/styles.css">
  <link rel="stylesheet" href="../../assets/css/cardiff.css">
  <style>
    .app{display:grid;grid-template-columns:260px 1fr;grid-template-rows:64px 1fr;grid-template-areas:"sidebar header" "sidebar main";min-height:100vh}
    header{grid-area:header;background:var(--gradient);color:var(--white);display:flex;align-items:center;justify-content:space-between;padding:0 20px;box-shadow:var(--shadow)}
    .brand{display:flex;gap:10px;align-items:center}
    .brand h1{font-family:'Playfair Display',serif;font-size:20px}
    .admin-badge{font-size:12px;background:rgba(255,255,255,0.2);padding:4px 10px;border-radius:20px}
    aside{grid-area:sidebar;background:var(--white);border-right:1px solid var(--bg-medium);padding:20px;position:sticky;top:0;height:100vh;overflow-y:auto}
    .nav{display:flex;flex-direction:column;gap:8px}
    .nav button{all:unset;display:flex;gap:10px;align-items:center;padding:12px;border-radius:10px;color:var(--text-dark);cursor:pointer;transition:all 0.3s ease}
    .nav button.active,.nav button:hover{background:var(--bg-light);color:var(--primary-blue)}
    .nav .group-title{font-size:11px;color:var(--text-light);text-transform:uppercase;margin:15px 0 5px}
    main{grid-area:main;padding:20px;background:var(--bg-light)}
    .panel{background:var(--white);border-radius:15px;box-shadow:var(--shadow);padding:20px;margin-bottom:20px}
    .panel h2{color:var(--primary-blue);margin-bottom:15px}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}
    .stat-card{background:var(--white);padding:20px;border-radius:15px;box-shadow:var(--shadow);text-align:center}
    .stat-number{font-size:2rem;font-weight:bold;color:var(--primary-blue)}
    .stat-label{color:var(--text-light);margin-top:5px}
    .btn{background:var(--gradient);color:var(--white);border:none;padding:10px 20px;border-radius:25px;cursor:pointer;font-weight:600;transition:all 0.3s ease}
    .btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,102,204,0.3)}
    .btn.danger{background:linear-gradient(135deg,#ef4444,#dc2626)}
    .form-group{margin-bottom:15px}
    .form-group label{display:block;margin-bottom:5px;font-weight:600;color:var(--text-dark)}
    .form-control{width:100%;padding:10px;border:2px solid var(--bg-dark);border-radius:8px;font-size:14px}
    .form-control:focus{outline:none;border-color:var(--primary-blue)}
    table{width:100%;border-collapse:collapse;margin-top:15px}
    th,td{padding:12px;text-align:left;border-bottom:1px solid var(--bg-medium)}
    th{background:var(--bg-light);font-weight:600;color:var(--text-dark)}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;place-items:center;z-index:1000}
    .modal.active{display:grid}
    .modal-content{background:var(--white);border-radius:15px;padding:20px;max-width:500px;width:90%}
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">
      <i class="fas fa-hospital"></i>
      <h1>Cardiff Admin</h1>
      <span class="admin-badge">Dashboard</span>
    </div>
    <div>
      <button class="btn" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </div>
  </header>

  <aside>
    <div class="nav">
      <div class="group-title">Cardiff Management</div>
      <button data-view="dashboard" class="active">
        <i class="fas fa-chart-line"></i><span>Dashboard</span>
      </button>
      <button data-view="residents">
        <i class="fas fa-users"></i><span>Residents</span>
      </button>
      <button data-view="staff">
        <i class="fas fa-user-nurse"></i><span>Staff</span>
      </button>
      <button data-view="visits">
        <i class="fas fa-calendar-check"></i><span>Visit Bookings</span>
      </button>
      <div class="group-title">Content</div>
      <button data-view="news">
        <i class="fas fa-newspaper"></i><span>Cardiff News</span>
      </button>
      <button data-view="activities">
        <i class="fas fa-palette"></i><span>Activities</span>
      </button>
    </div>
  </aside>

  <main>
    <!-- Dashboard -->
    <section data-section="dashboard">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number" id="residentCount">45</div>
          <div class="stat-label">Current Residents</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="staffCount">28</div>
          <div class="stat-label">Staff Members</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="visitCount">12</div>
          <div class="stat-label">Pending Visits</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="occupancyRate">96%</div>
          <div class="stat-label">Occupancy Rate</div>
        </div>
      </div>
      
      <div class="panel">
        <h2>Cardiff Bay Overview</h2>
        <p>Welcome to the Cardiff Bay nursing home administration dashboard. Manage residents, staff, and daily operations from this central hub.</p>
      </div>
    </section>

    <!-- Residents -->
    <section data-section="residents" hidden>
      <div class="panel">
        <h2>Resident Management</h2>
        <button class="btn" onclick="openModal('addResident')">
          <i class="fas fa-plus"></i> Add Resident
        </button>
        <table id="residentsTable">
          <thead>
            <tr><th>Name</th><th>Room</th><th>Care Level</th><th>Actions</th></tr>
          </thead>
          <tbody id="residentsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Staff -->
    <section data-section="staff" hidden>
      <div class="panel">
        <h2>Staff Management</h2>
        <button class="btn" onclick="openModal('addStaff')">
          <i class="fas fa-plus"></i> Add Staff
        </button>
        <table id="staffTable">
          <thead>
            <tr><th>Name</th><th>Role</th><th>Shift</th><th>Actions</th></tr>
          </thead>
          <tbody id="staffBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Visit Bookings -->
    <section data-section="visits" hidden>
      <div class="panel">
        <h2>Visit Bookings</h2>
        <table id="visitsTable">
          <thead>
            <tr><th>Visitor</th><th>Date</th><th>Time</th><th>Status</th><th>Actions</th></tr>
          </thead>
          <tbody id="visitsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- News -->
    <section data-section="news" hidden>
      <div class="panel">
        <h2>Cardiff News</h2>
        <button class="btn" onclick="openModal('addNews')">
          <i class="fas fa-plus"></i> Add News
        </button>
        <table id="newsTable">
          <thead>
            <tr><th>Title</th><th>Date</th><th>Category</th><th>Actions</th></tr>
          </thead>
          <tbody id="newsBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Activities -->
    <section data-section="activities" hidden>
      <div class="panel">
        <h2>Activities Schedule</h2>
        <button class="btn" onclick="openModal('addActivity')">
          <i class="fas fa-plus"></i> Add Activity
        </button>
        <table id="activitiesTable">
          <thead>
            <tr><th>Activity</th><th>Date</th><th>Time</th><th>Participants</th><th>Actions</th></tr>
          </thead>
          <tbody id="activitiesBody"></tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modalTitle">Add Item</h3>
    <div id="modalBody"></div>
    <div style="margin-top:20px;text-align:right">
      <button class="btn" style="background:#6c757d" onclick="closeModal()">Cancel</button>
      <button class="btn" id="saveBtn" onclick="saveItem()">Save</button>
    </div>
  </div>
</div>

<script>
// Navigation
document.querySelectorAll('.nav button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const view = btn.dataset.view;
    document.querySelectorAll('[data-section]').forEach(sec => sec.hidden = sec.dataset.section !== view);
  });
});

// Modal functions
function openModal(type) {
  const modal = document.getElementById('modal');
  const title = document.getElementById('modalTitle');
  const body = document.getElementById('modalBody');
  
  const forms = {
    addResident: {
      title: 'Add Resident',
      form: `
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" class="form-control" id="residentName" required>
        </div>
        <div class="form-group">
          <label>Room Number</label>
          <input type="text" class="form-control" id="roomNumber" required>
        </div>
        <div class="form-group">
          <label>Care Level</label>
          <select class="form-control" id="careLevel">
            <option>Residential</option>
            <option>Nursing</option>
            <option>Dementia</option>
          </select>
        </div>`
    },
    addStaff: {
      title: 'Add Staff Member',
      form: `
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" class="form-control" id="staffName" required>
        </div>
        <div class="form-group">
          <label>Role</label>
          <select class="form-control" id="staffRole">
            <option>Nurse</option>
            <option>Care Assistant</option>
            <option>Administrator</option>
            <option>Kitchen Staff</option>
          </select>
        </div>
        <div class="form-group">
          <label>Shift</label>
          <select class="form-control" id="staffShift">
            <option>Day</option>
            <option>Night</option>
            <option>Part-time</option>
          </select>
        </div>`
    },
    addNews: {
      title: 'Add Cardiff News',
      form: `
        <div class="form-group">
          <label>Title</label>
          <input type="text" class="form-control" id="newsTitle" required>
        </div>
        <div class="form-group">
          <label>Category</label>
          <select class="form-control" id="newsCategory">
            <option>Activities</option>
            <option>Awards</option>
            <option>Events</option>
            <option>Updates</option>
          </select>
        </div>
        <div class="form-group">
          <label>Content</label>
          <textarea class="form-control" id="newsContent" rows="4"></textarea>
        </div>`
    },
    addActivity: {
      title: 'Add Activity',
      form: `
        <div class="form-group">
          <label>Activity Name</label>
          <input type="text" class="form-control" id="activityName" required>
        </div>
        <div class="form-group">
          <label>Date</label>
          <input type="date" class="form-control" id="activityDate" required>
        </div>
        <div class="form-group">
          <label>Time</label>
          <input type="time" class="form-control" id="activityTime" required>
        </div>
        <div class="form-group">
          <label>Max Participants</label>
          <input type="number" class="form-control" id="maxParticipants" min="1" max="50">
        </div>`
    }
  };
  
  title.textContent = forms[type].title;
  body.innerHTML = forms[type].form;
  modal.classList.add('active');
  window.currentModalType = type;
}

function closeModal() {
  document.getElementById('modal').classList.remove('active');
}

function saveItem() {
  const type = window.currentModalType;
  // Here you would save the data to localStorage or send to server
  alert('Item saved successfully!');
  closeModal();
  loadData();
}

// Load visit bookings from localStorage
function loadVisits() {
  const visits = JSON.parse(localStorage.getItem('cardiff-visits') || '[]');
  const tbody = document.getElementById('visitsBody');
  tbody.innerHTML = visits.map(visit => `
    <tr>
      <td>${visit.firstName} ${visit.lastName}</td>
      <td>${visit.visitDate}</td>
      <td>${visit.visitTime}</td>
      <td><span style="background:#28a745;color:white;padding:2px 8px;border-radius:10px;font-size:12px">Pending</span></td>
      <td>
        <button class="btn" style="padding:5px 10px;font-size:12px" onclick="approveVisit('${visit.timestamp}')">Approve</button>
        <button class="btn danger" style="padding:5px 10px;font-size:12px" onclick="cancelVisit('${visit.timestamp}')">Cancel</button>
      </td>
    </tr>
  `).join('');
  
  document.getElementById('visitCount').textContent = visits.length;
}

function approveVisit(timestamp) {
  alert('Visit approved!');
  loadVisits();
}

function cancelVisit(timestamp) {
  if(confirm('Cancel this visit?')) {
    const visits = JSON.parse(localStorage.getItem('cardiff-visits') || '[]');
    const updated = visits.filter(v => v.timestamp !== timestamp);
    localStorage.setItem('cardiff-visits', JSON.stringify(updated));
    loadVisits();
  }
}

function loadData() {
  loadVisits();
  // Load other data tables here
}

function logout() {
  if(confirm('Logout?')) {
    window.location.href = '../../index.html';
  }
}

// Initialize
loadData();
</script>
</body>
</html>